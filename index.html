<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุฏุงุจุชโุงุฑ โ ูุฏุฑุช ููุฏุ ุงูุณููู ู ุชุบุฐู</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- jsPDF for PDF export -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">๐</div>
      <div>
        <div class="title">ุฏุงุจุชโุงุฑ</div>
        <div class="subtitle">ูุจโุงูพ ูุงุฑุณ ุจุฑุง ุซุจุช ู ุชุญูู ููุฏุ ุงูุณููู ู ุชุบุฐู</div>
      </div>
    </div>

    <div class="profileBox">
      <label class="small">ูพุฑููุงู ูุนุงู</label>
      <div class="row">
        <select id="profileSelect"></select>
        <button class="btn" id="addProfileBtn">+ ูพุฑููุงู</button>
      </div>
      <div class="row gap">
        <button class="btn ghost" id="editProfileBtn">ูุฑุงุด</button>
        <button class="btn danger ghost" id="deleteProfileBtn">ุญุฐู</button>
      </div>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="dashboard">ุฏุงุดุจูุฑุฏ</button>
    <button class="tab" data-tab="log">ุซุจุช ุงุทูุงุนุงุช</button>
    <button class="tab" data-tab="nutrition">ุชุบุฐู</button>
    <button class="tab" data-tab="education">ุขููุฒุด</button>
    <button class="tab" data-tab="reports">ฺฏุฒุงุฑุดโูุง</button>
    <button class="tab" data-tab="settings">ุชูุธูุงุช</button>
  </nav>

  <main class="container">
    <!-- DASHBOARD -->
    <section id="tab-dashboard" class="panel">
      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ุฎูุงุตู ุงูุฑูุฒ</div>
          <div class="kpis" id="todayKpis"></div>
          <div class="hint">ูฺฉุชู: ุจุฑุง ุฒูุฏู ุดุฏู ุฏุงุดุจูุฑุฏุ ยซ๐ฅ ุฏุชุง ูููููยป ุฑุง ุจุฒู ุง ุซุจุช ุงูุฌุงู ุจุฏู.</div>
          <div class="row gap">
            <button class="btn" id="seedBtn">๐ฅ ุฏุชุง ููููู</button>
            <button class="btn ghost" id="clearTodayBtn">ูพุงฺฉโฺฉุฑุฏู ุฏุงุฏูโูุง ุงูุฑูุฒ</button>
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">ูุดุฏุงุฑูุง ุงูู</div>
          <div id="safetyBox" class="safetyBox">
            <div class="muted">ูููุฒ ููุฑุฏ ุซุจุช ูุดุฏู ุงุณุช.</div>
          </div>
          <div class="note">
            โ๏ธ ุงู ุงูพ ยซูพุดููุงุฏ ุฏุฑูุงู/ุฏูุฒยป ููโุฏูุฏ ู ุฌุงฺฏุฒู ูพุฒุดฺฉ ูุณุช. ููุท ุจุฑุง ุซุจุชุ ฺฏุฒุงุฑุด ู ูุดุฏุงุฑูุง ุนููู ุงุณุช.
          </div>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ูููุฏุงุฑ ููุฏ (ท ุฑูุฒ ุงุฎุฑ)</div>
          <canvas id="glucoseChart" height="120"></canvas>
        </div>
        <div class="card">
          <div class="cardTitle">ุงุฏฺฏุฑ/ุจูุดโูุง (ุณุงุฏู ู ุงูู)</div>
          <div id="insightsBox" class="insights"></div>
          <div class="hint">
            ยซุงุฏฺฏุฑยป ุฏุฑ ุงู ูุณุฎู ุนู ูพุฏุง ฺฉุฑุฏู ุงูฺฏููุง (ูุซูุงู ุจุนุฏ ุตุจุญุงูู ููุดู ุจุงูุง ูโุฑู) ุจุง ูุงูฺฏูโฺฏุฑ ู ููุงุณู ุจุง ูุฏู.
            ุจุฑุง ูุฏู ุจูููฺฺฉ ูุงูุน ู ฺฉูุชุฑู ูุฏุจฺฉุ ูุงุฒ ุจู ุจฺฉโุงูุฏุ ุฏุงุฏู ุฒุงุฏ ู ูุณุฑูุง ุงูู ูพุฒุดฺฉ ุฏุงุฑู.
          </div>
        </div>
      </div>
    </section>

    <!-- LOG -->
    <section id="tab-log" class="panel hidden">
      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ุซุจุช ููุฏ ุฎูู ๐ฉธ</div>
          <div class="form">
            <label>ุฒูุงู/ููุน</label>
            <select id="glucoseType">
              <option value="FBS">FBS (ูุงุดุชุง)</option>
              <option value="AfterBreakfast2h">ฒ ุณุงุนุช ุจุนุฏ ุตุจุญุงูู</option>
              <option value="BeforeLunch">ูุจู ูุงูุงุฑ</option>
              <option value="AfterLunch2h">ฒ ุณุงุนุช ุจุนุฏ ูุงูุงุฑ</option>
              <option value="BeforeDinner">ูุจู ุดุงู</option>
              <option value="AfterDinner2h">ฒ ุณุงุนุช ุจุนุฏ ุดุงู</option>
              <option value="BeforeSleep">ูุจู ุฎูุงุจ</option>
            </select>

            <label>ููุฏุงุฑ ููุฏ (mg/dL)</label>
            <input id="glucoseValue" type="number" min="20" max="600" placeholder="ูุซูุงู 145" />

            <label>ุชุงุฑุฎ ู ุณุงุนุช</label>
            <input id="glucoseDT" type="datetime-local" />

            <button class="btn" id="saveGlucoseBtn">ุซุจุช ููุฏ</button>
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">ุซุจุช ุงูุณููู ๐</div>
          <div class="form">
            <label>ููุน</label>
            <select id="insulinKind">
              <option value="Basal">Basal (ุทููุงูโุงุซุฑ)</option>
              <option value="Bolus">Bolus (ฺฉูุชุงูโุงุซุฑ)</option>
              <option value="Correction">Correction (ุงุตูุงุญ)</option>
            </select>

            <label>ูุงู ุงูุณููู</label>
            <input id="insulinName" placeholder="ูุซูุงู Lantus ุง Novorapid" />

            <label>ููุฏุงุฑ (ูุงุญุฏ)</label>
            <input id="insulinUnits" type="number" min="0" max="200" placeholder="ูุซูุงู 16" />

            <label>ุชุงุฑุฎ ู ุณุงุนุช</label>
            <input id="insulinDT" type="datetime-local" />

            <label class="row gap alignCenter">
              <input id="insulinReminder" type="checkbox" />
              ุงุฏุขูุฑ ูุนุงู ุดูุฏ (Notification)
            </label>

            <button class="btn" id="saveInsulinBtn">ุซุจุช ุงูุณููู</button>
          </div>
        </div>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ุซุจุช ูุนุฏู ุบุฐุง ๐ฝ๏ธ</div>
          <div class="form">
            <label>ูุนุฏู</label>
            <select id="mealType">
              <option value="Breakfast">ุตุจุญุงูู</option>
              <option value="Lunch">ูุงูุงุฑ</option>
              <option value="Dinner">ุดุงู</option>
              <option value="Snack">ูุงูโูุนุฏู</option>
            </select>

            <label>ุดุฑุญ ุบุฐุง</label>
            <input id="mealDesc" placeholder="ูุซูุงู ูุงู + ูพูุฑ + ฺุง" />

            <label>ฺฉุฑุจููุฏุฑุงุช ฺฉู (ฺฏุฑู)</label>
            <input id="mealCarb" type="number" min="0" max="500" placeholder="ูุซูุงู 45" />

            <label>ุชุงุฑุฎ ู ุณุงุนุช</label>
            <input id="mealDT" type="datetime-local" />

            <label>ููฺฉ ุจู ููุฏ ฒ ุณุงุนุช ุจุนุฏ (ุงุฎุชุงุฑ)</label>
            <select id="mealLinkedGlucose">
              <option value="">โ ุงูุชุฎุงุจ โ</option>
            </select>

            <button class="btn" id="saveMealBtn">ุซุจุช ูุนุฏู</button>
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">ูุณุช ุงูุฑูุฒ</div>
          <div class="row gap">
            <button class="btn ghost" id="exportJsonBtn">Export JSON</button>
            <label class="btn ghost fileBtn">
              Import JSON
              <input id="importJsonInput" type="file" accept="application/json" />
            </label>
          </div>
          <div id="todayList" class="list"></div>
        </div>
      </div>
    </section>

    <!-- NUTRITION -->
    <section id="tab-nutrition" class="panel hidden">
      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ุจุงูฺฉ ุบุฐุง (ููููู) ๐ฅ</div>
          <div class="hint">ุฌุณุชุฌู ฺฉูุ ููุฏุงุฑ/ูุงุญุฏ ุงูุชุฎุงุจ ฺฉูุ ฺฉุฑุจููุฏุฑุงุช ุชุฎูู ุฑุง ุจุฑุฏุงุฑ ู ุฏุฑ ูุนุฏู ุซุจุช ฺฉู.</div>
          <div class="row gap">
            <input id="foodSearch" class="grow" placeholder="ูุซูุงู ุจุฑูุฌุ ูุงูุ ุณุจ..." />
            <select id="foodServing">
              <option value="1">ฑ ูุงุญุฏ</option>
              <option value="0.5">ูู ูุงุญุฏ</option>
              <option value="2">ฒ ูุงุญุฏ</option>
              <option value="3">ณ ูุงุญุฏ</option>
            </select>
            <button class="btn" id="foodAddToMealBtn">ุงูุฒูุฏู ุจู ูุนุฏู</button>
          </div>
          <div id="foodResults" class="foodResults"></div>
        </div>

        <div class="card">
          <div class="cardTitle">ุฑุงูููุง ุณุฑุน ุชุบุฐู</div>
          <ul class="bullets">
            <li>ฺฉุฑุจููุฏุฑุงุชโูุง ุจุดุชุฑู ุงุซุฑ ูุณุชูู ุฑุง ุฑู ููุฏ ุฏุงุฑูุฏ.</li>
            <li>ุบุฐุงูุง ฺุฑุจ/ูพุฑูุชุฆู ูโุชูุงููุฏ ุงูุฒุงุด ููุฏ ุฑุง ุฏุฑุชุฑ ฺฉููุฏ.</li>
            <li>ุซุจุช ุฏูู ุฒูุงู ูุนุฏู ู ููุฏ ฒ ุณุงุนุช ุจุนุฏุ ุจูุชุฑู ุฏุงุฏู ุจุฑุง ุชุญูู ุงูฺฏููุงุณุช.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- EDUCATION -->
    <section id="tab-education" class="panel hidden">
      <div class="card">
        <div class="cardTitle">ุขููุฒุด (ูุณุฎู ุงููู) ๐</div>
        <div class="eduGrid">
          <article class="eduCard">
            <h3>ููพูฺฏูุณู (ููุฏ ูพุงู)</h3>
            <p>ุงฺฏุฑ ููุฏ ุฒุฑ 70 ุจุงุดุฏุ ูุนูููุงู ูุงุฒ ุจู ุงูุฏุงู ุณุฑุน ุงุณุช. ุจุณุชู ุจู ุชูุตู ูพุฒุดฺฉุ ูุตุฑู ฺฉุฑุจููุฏุฑุงุช ุณุฑุนโุงูุฌุฐุจ ู ุชฺฉุฑุงุฑ ุงูุฏุงุฒูโฺฏุฑ ููู ุงุณุช.</p>
            <p class="muted">ุงู ุฑุงูููุง ุนููู ุงุณุช ู ุฌุงฺฏุฒู ุฏุณุชูุฑ ูพุฒุดฺฉ ูุณุช.</p>
          </article>
          <article class="eduCard">
            <h3>ูุงูพุฑฺฏูุณู (ููุฏ ุจุงูุง)</h3>
            <p>ุงฺฏุฑ ููุฏ ุฎู ุจุงูุง ุงุณุช (ูุซูุงู ุจุงูุง 300)ุ ุจุฑุฑุณ ุนูุงูู (ุบุฐุงุ ูุฑุงููุด ุชุฒุฑูุ ุจูุงุฑ) ู ุฑุงูููุง ูพุฒุดฺฉ ุถุฑูุฑ ุงุณุช.</p>
          </article>
          <article class="eduCard">
            <h3>ุดูุงุฑุด ฺฉุฑุจููุฏุฑุงุช</h3>
            <p>ุงุฏฺฏุฑ ุชุฎูู ฺฉุฑุจููุฏุฑุงุช ุจุง ูุงุญุฏูุง ุฎุงูฺฏ (ูุงุดู/ููุงู/ฺฉู ุฏุณุช) ฺฉูฺฉ ูโฺฉูุฏ ูุนุฏูโูุง ุฏููโุชุฑ ุซุจุช ุดููุฏ.</p>
          </article>
          <article class="eduCard">
            <h3>ูุฑุฒุด ู ููุฏ</h3>
            <p>ูุนุงูุช ุจุฏู ูโุชูุงูุฏ ููุฏ ุฑุง ูพุงู ุจุงูุฑุฏุ ุจุฑูุงููโุฑุฒ ู ูพุงุด ุจุฑุง ูพุดฺฏุฑ ุงุฒ ููพู ุงููุช ุฏุงุฑุฏ.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- REPORTS -->
    <section id="tab-reports" class="panel hidden">
      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ฺฏุฒุงุฑุด PDF ๐</div>
          <div class="hint">ฺฉ ุจุงุฒู ุงูุชุฎุงุจ ฺฉู ู ฺฏุฒุงุฑุด ุฑุง ุจู PDF ุฎุฑูุฌ ุจฺฏุฑ.</div>
          <div class="row gap">
            <div class="formInline">
              <label>ุงุฒ</label>
              <input id="reportFrom" type="date" />
            </div>
            <div class="formInline">
              <label>ุชุง</label>
              <input id="reportTo" type="date" />
            </div>
            <button class="btn" id="exportPdfBtn">ุฎุฑูุฌ PDF</button>
          </div>
          <div class="note">ุงฺฏุฑ ูููุช ูุงุฑุณ ุฏุฑ PDF ุณุงุฏู ุจูุฏุ ูุณุฎู ุจุนุฏ ูููุช embed ูโฺฉูู.</div>
        </div>

        <div class="card">
          <div class="cardTitle">ฺฏุฒุงุฑุดโูุง ููุดููุฏ (ุณุงุฏู)</div>
          <div id="reportInsights" class="insights"></div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="tab-settings" class="panel hidden">
      <div class="grid2">
        <div class="card">
          <div class="cardTitle">ุชูุธูุงุช ูพุฑููุงู</div>
          <div class="form">
            <label>ูุงุญุฏ</label>
            <select id="unitSelect">
              <option value="mg/dL">mg/dL</option>
              <option value="mmol/L">mmol/L</option>
            </select>

            <label>ููุน ุฏุงุจุช</label>
            <select id="diabetesTypeSelect">
              <option value="Type 1">Type 1</option>
              <option value="Type 2">Type 2</option>
              <option value="Gestational">ุจุงุฑุฏุงุฑ</option>
              <option value="Other">ุณุงุฑ</option>
            </select>

            <div class="grid2">
              <div>
                <label>ูุฏู ูพุงู</label>
                <input id="targetLow" type="number" min="40" max="200" />
              </div>
              <div>
                <label>ูุฏู ุจุงูุง</label>
                <input id="targetHigh" type="number" min="80" max="400" />
              </div>
            </div>

            <button class="btn" id="saveProfileSettingsBtn">ุฐุฎุฑู ุชูุธูุงุช</button>
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">ุงุฏุขูุฑ Basal (ูุงูุน) ๐</div>
          <div class="hint">ุจุฑุง ูุนุงู ุดุฏูุ ุงุฌุงุฒู Notification ุฑุง ุจุฏู. ุงู ุงุฏุขูุฑ ุฏุฑ ูุฑูุฑฺฏุฑ ฺฉุงุฑ ูโฺฉูุฏ (ููุจุงู/ุฏุณฺฉุชุงูพ ุจุณุชู ุจู ุชูุธูุงุช).</div>
          <div class="form">
            <button class="btn" id="requestNotifBtn">ูุนุงูโุณุงุฒ ุงุนูุงูโูุง</button>
            <div class="row gap">
              <input id="basalTime" type="time" value="22:00" />
              <button class="btn ghost" id="setDailyBasalReminderBtn">ุซุจุช ุงุฏุขูุฑ ุฑูุฒุงูู</button>
            </div>
            <div id="notifStatus" class="muted"></div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="cardTitle">ุฏุฑุจุงุฑู ยซูุฏู ุงุฏฺฏุฑยป</div>
        <p>
          ุฏุฑ ูุงู ฺฏูุชโูฺฏู ูู ุงุดุงุฑู ุดุฏู ฺฉู ูุฏูุ ฺฉ ุณุณุชู ุชุตููโุงุฑ ุจุง ูุงู ุงูู ุงุณุช
          (ุซุจุชุ ูููุฏุงุฑุ ูุดุฏุงุฑุ ฺฏุฒุงุฑุดุ ู ุงูุชู ุงูฺฏููุง) ๎filecite๎turn2file0๎
        </p>
        <p>
          ูุณุฎู ูุนู ยซุงุฏฺฏุฑยป ุฑุง ุจู ุดฺฉู <b>ุชุญูู ุงูฺฏููุง</b> ูพุงุฏู ูโฺฉูุฏ (ูุงูฺฏูโูุงุ ุฑููุฏูุงุ ุงุฑุชุจุงุท ูุนุฏูโููุฏ ฒ ุณุงุนุช ุจุนุฏ).
          ูพุงุฏูโุณุงุฒ ยซูุฏู ุจูููฺฺฉ ูุฏุจฺฉู ุดุฎุตยป (ูุซู ฺฉูุชุฑูโฺฉููุฏู ู ูุฏู ููุฑููู) ุจู ุฏุงุฏูโ ุฒุงุฏุ ุงุนุชุจุงุฑุณูุฌ ู ุทุฑุงุญ ุงูู ูพุฒุดฺฉ ูุงุฒ ุฏุงุฑุฏ
          ู ุจุงุฏ ุจุง ุชู ุฏุฑูุงู/ุงุณุชุงูุฏุงุฑุฏูุง ูพุฒุดฺฉ ุฌูู ุจุฑูุฏ.
        </p>
      </div>
    </section>
  </main>

  <!-- Modals -->
  <div id="modalBackdrop" class="backdrop hidden"></div>

  <div id="profileModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalHeader">
      <div class="modalTitle" id="profileModalTitle">ูพุฑููุงู ุฌุฏุฏ</div>
      <button class="iconBtn" id="closeProfileModal">โ</button>
    </div>
    <div class="modalBody">
      <div class="form">
        <label>ูุงู ูพุฑููุงู</label>
        <input id="profileNameInput" placeholder="ูุซูุงู ุนู / ุจูุงุฑ ฑ" />
        <label>ูุงุญุฏ</label>
        <select id="profileUnitInput">
          <option value="mg/dL">mg/dL</option>
          <option value="mmol/L">mmol/L</option>
        </select>
        <label>ููุน ุฏุงุจุช</label>
        <select id="profileTypeInput">
          <option value="Type 1">Type 1</option>
          <option value="Type 2">Type 2</option>
          <option value="Gestational">ุจุงุฑุฏุงุฑ</option>
          <option value="Other">ุณุงุฑ</option>
        </select>
        <div class="grid2">
          <div>
            <label>ูุฏู ูพุงู</label>
            <input id="profileTargetLowInput" type="number" value="80" />
          </div>
          <div>
            <label>ูุฏู ุจุงูุง</label>
            <input id="profileTargetHighInput" type="number" value="180" />
          </div>
        </div>
        <button class="btn" id="saveProfileBtn">ุฐุฎุฑู</button>
      </div>
    </div>
  </div>

  <script src="food_db.js"></script>
  <script src="app.js"></script>
</body>
</html>
